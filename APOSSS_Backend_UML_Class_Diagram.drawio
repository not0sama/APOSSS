<mxfile host="draw.io" modified="2024-12-01T00:00:00.000Z" agent="5.0" etag="uml-class-diagram" version="24.7.17">
  <diagram name="APOSSS Backend UML" id="backend-uml">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- APOSSSApp - Main Flask Application -->
        <mxCell id="app" value="&lt;&lt;Flask Application&gt;&gt;&#xa;APOSSSApp&#xa;────────────────&#xa;- app: Flask&#xa;- port: int&#xa;- debug: bool&#xa;────────────────&#xa;+ home()&#xa;+ dev_index()&#xa;+ results()&#xa;+ login()&#xa;+ signup()&#xa;+ dashboard()&#xa;+ register()&#xa;+ login_api()&#xa;+ search()&#xa;+ feedback()&#xa;+ health_check()" vertex="1" parent="1">
          <mxGeometry x="490" y="40" width="180" height="200" as="geometry" />
        </mxCell>

        <!-- DatabaseManager -->
        <mxCell id="dbmgr" value="DatabaseManager&#xa;────────────────&#xa;- connections: Dict&#xa;- databases: Dict&#xa;- db_configs: Dict&#xa;────────────────&#xa;+ __init__()&#xa;+ get_database()&#xa;+ test_connections()&#xa;+ _initialize_connections()" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="180" height="140" as="geometry" />
        </mxCell>

        <!-- UserManager -->
        <mxCell id="usermgr" value="UserManager&#xa;────────────────&#xa;- db_manager: DatabaseManager&#xa;- users_collection&#xa;- jwt_secret: str&#xa;- token_expiry_hours: int&#xa;────────────────&#xa;+ register_user()&#xa;+ authenticate_user()&#xa;+ verify_token()&#xa;+ get_user_by_id()&#xa;+ update_profile()&#xa;+ track_interaction()&#xa;+ send_verification_code()&#xa;+ reset_password()" vertex="1" parent="1">
          <mxGeometry x="40" y="220" width="180" height="200" as="geometry" />
        </mxCell>

        <!-- OAuthManager -->
        <mxCell id="oauth" value="OAuthManager&#xa;────────────────&#xa;- google_config: Dict&#xa;- orcid_config: Dict&#xa;────────────────&#xa;+ get_authorization_url()&#xa;+ exchange_code_for_token()&#xa;+ get_user_info()&#xa;+ process_oauth_login()&#xa;+ is_configured()" vertex="1" parent="1">
          <mxGeometry x="260" y="220" width="180" height="140" as="geometry" />
        </mxCell>

        <!-- LLMProcessor -->
        <mxCell id="llm" value="LLMProcessor&#xa;────────────────&#xa;- model_name: str&#xa;- api_key: str&#xa;- model: generativeai&#xa;────────────────&#xa;+ process_query()&#xa;+ _enhance_query()&#xa;+ _extract_entities()&#xa;+ _generate_keywords()&#xa;+ _detect_intent()&#xa;+ _add_backward_compatibility()" vertex="1" parent="1">
          <mxGeometry x="720" y="40" width="180" height="160" as="geometry" />
        </mxCell>

        <!-- QueryProcessor -->
        <mxCell id="queryproc" value="QueryProcessor&#xa;────────────────&#xa;- llm_processor: LLMProcessor&#xa;────────────────&#xa;+ process_query()&#xa;+ validate_query()&#xa;+ _clean_query()&#xa;+ _enhance_query_data()" vertex="1" parent="1">
          <mxGeometry x="720" y="240" width="180" height="120" as="geometry" />
        </mxCell>

        <!-- SearchEngine -->
        <mxCell id="search" value="SearchEngine&#xa;────────────────&#xa;- db_manager: DatabaseManager&#xa;- faiss_index: Optional&#xa;────────────────&#xa;+ search()&#xa;+ _traditional_search()&#xa;+ _search_academic_library()&#xa;+ _search_experts_system()&#xa;+ _search_research_papers()&#xa;+ _search_laboratories()&#xa;+ _search_funding_system()&#xa;+ _aggregate_results()" vertex="1" parent="1">
          <mxGeometry x="260" y="40" width="200" height="160" as="geometry" />
        </mxCell>

        <!-- RankingEngine -->
        <mxCell id="ranking" value="RankingEngine&#xa;────────────────&#xa;- llm_processor: LLMProcessor&#xa;- embedding_ranker: EmbeddingRanker&#xa;- ltr_ranker: LTRRanker&#xa;- knowledge_graph: KnowledgeGraph&#xa;- tfidf_vectorizer&#xa;────────────────&#xa;+ rank_search_results()&#xa;+ _calculate_heuristic_scores()&#xa;+ _calculate_tfidf_scores()&#xa;+ _calculate_intent_scores()&#xa;+ _calculate_personalization_scores()&#xa;+ _categorize_by_relevance()&#xa;+ train_ltr_model()" vertex="1" parent="1">
          <mxGeometry x="490" y="280" width="220" height="200" as="geometry" />
        </mxCell>

        <!-- LTRRanker -->
        <mxCell id="ltr" value="LTRRanker&#xa;────────────────&#xa;- model: xgboost.XGBRanker&#xa;- feature_names: List[str]&#xa;- is_trained: bool&#xa;- feature_extractor: FeatureExtractor&#xa;────────────────&#xa;+ extract_features()&#xa;+ train_model()&#xa;+ rank_results()&#xa;+ predict_scores()&#xa;+ get_model_stats()&#xa;+ _save_model()&#xa;+ _load_model()" vertex="1" parent="1">
          <mxGeometry x="750" y="400" width="180" height="160" as="geometry" />
        </mxCell>

        <!-- EmbeddingRanker -->
        <mxCell id="embedding" value="EmbeddingRanker&#xa;────────────────&#xa;- model: SentenceTransformer&#xa;- faiss_index: faiss.Index&#xa;- document_cache: Dict&#xa;- embedding_cache: Dict&#xa;────────────────&#xa;+ search_similar_documents()&#xa;+ calculate_realtime_similarity()&#xa;+ build_index()&#xa;+ warm_up_cache()&#xa;+ _encode_text()&#xa;+ _build_enhanced_query()&#xa;+ clear_cache()" vertex="1" parent="1">
          <mxGeometry x="260" y="400" width="200" height="160" as="geometry" />
        </mxCell>

        <!-- KnowledgeGraph -->
        <mxCell id="knowledge" value="KnowledgeGraph&#xa;────────────────&#xa;- graph: networkx.DiGraph&#xa;- pagerank_scores: Dict&#xa;────────────────&#xa;+ add_paper()&#xa;+ add_expert()&#xa;+ add_equipment()&#xa;+ calculate_pagerank()&#xa;+ get_authority_score()&#xa;+ get_connection_strength()&#xa;+ extract_graph_features()" vertex="1" parent="1">
          <mxGeometry x="490" y="520" width="180" height="160" as="geometry" />
        </mxCell>

        <!-- FeedbackSystem -->
        <mxCell id="feedback" value="FeedbackSystem&#xa;────────────────&#xa;- db_manager: DatabaseManager&#xa;- feedback_collection&#xa;- feedback_file: str&#xa;────────────────&#xa;+ submit_feedback()&#xa;+ get_result_feedback()&#xa;+ get_query_feedback()&#xa;+ get_recent_feedback()&#xa;+ _validate_feedback()&#xa;+ _enhance_feedback()" vertex="1" parent="1">
          <mxGeometry x="40" y="460" width="180" height="160" as="geometry" />
        </mxCell>

        <!-- EnhancedTextFeatures -->
        <mxCell id="textfeatures" value="EnhancedTextFeatures&#xa;────────────────&#xa;- bm25: BM25Okapi&#xa;────────────────&#xa;+ extract_all_features()&#xa;+ calculate_bm25_scores()&#xa;+ calculate_ngram_overlap()&#xa;+ calculate_term_proximity()&#xa;+ assess_text_complexity()" vertex="1" parent="1">
          <mxGeometry x="750" y="600" width="180" height="120" as="geometry" />
        </mxCell>

        <!-- Relationships -->
        <!-- APOSSSApp dependencies -->
        <mxCell id="app-db" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="dbmgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="app-user" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="usermgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="app-oauth" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="oauth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="app-search" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="search">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="app-ranking" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="ranking">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="app-feedback" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="app" target="feedback">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- UserManager dependencies -->
        <mxCell id="user-db" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="usermgr" target="dbmgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- QueryProcessor dependencies -->
        <mxCell id="query-llm" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="queryproc" target="llm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SearchEngine dependencies -->
        <mxCell id="search-db" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="search" target="dbmgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- RankingEngine dependencies -->
        <mxCell id="ranking-llm" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="ranking" target="llm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ranking-embedding" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="ranking" target="embedding">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ranking-ltr" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="ranking" target="ltr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ranking-knowledge" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="ranking" target="knowledge">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- LTRRanker dependencies -->
        <mxCell id="ltr-text" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="ltr" target="textfeatures">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- FeedbackSystem dependencies -->
        <mxCell id="feedback-db" value="" style="endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="feedback" target="dbmgr">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="Legend:&#xa;──────&#xa;→ Dependency&#xa;├─ Composition&#xa;╰─ Association" vertex="1" parent="1">
          <mxGeometry x="940" y="40" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- Title -->
        <mxCell id="title" value="APOSSS Backend - UML Class Diagram&#xa;AI-Powered Open-Science Semantic Search System" vertex="1" parent="1">
          <mxGeometry x="400" y="740" width="400" height="40" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile> 